<div class="panel panel-default">
    <div class="panel-heading">
        <strong ng-if="!vm.params.id">新增活动</strong>
        <strong ng-if="vm.params.id">编辑活动</strong>

    </div>
    <div class="panel-body detail-padding-15">
        <form class="form-horizontal" name="eventdetail">
            <div class="form-group">
                <label class="col-md-2 control-label ">发布状态</label>
                <div class="col-md-10">
                    <select class="form-control" ng-model="vm.params.status" name="status" required>
                        <option value="1" ng-selected="vm.params.status==1">草稿&emsp;&emsp;&emsp;&emsp;</option>
                        <option value="2" ng-selected="vm.params.status==2">上线&emsp;&emsp;&emsp;&emsp;</option>
                    </select>
                </div>
                <div class="col-md-offset-2 col-md-10" ng-if="eventdetail.status.$invalid && (eventdetail.status.$touched || vm.error)">
                    <div class="text-danger">请选择发布状态</div>
                </div>
            </div>

            <div class="form-group">
                <label class="col-md-2 control-label">活动标题</label>
                <div class="col-md-10">
                    <input type="text" class="form-control" name="title" ng-model="vm.params.title" required>
                </div>
                <div class="col-md-offset-2 col-md-10" ng-if="eventdetail.title.$invalid && (eventdetail.title.$touched || vm.error)">
                    <div class="text-danger">请填写活动标题</div>
                </div>

            </div>

            <div class="form-group">
                <label class="col-md-2 control-label ">活动文案</label>
                <div class="col-md-10">
                    <input type="text" class="form-control" name="content" ng-model="vm.params.content" required>
                </div>
                <div class="col-md-offset-2 col-md-10" ng-if="eventdetail.content.$invalid &&( (eventdetail.content.$touched&&eventdetail.content.$touched) || vm.error)">
                    <div class="text-danger">请填写活动文案</div>
                </div>
            </div>

            <div class="form-group">
                <div class="form-group">
                    <label class="col-md-2 control-label">配图</label>
                    <div class="col-md-10">
                        <div class="col-md-12">
                            <label class="btn btn-primary" for="file">选择文件</label>
                            <input id="file" style="display: none" type="file" nv-file-select uploader="vm.uploader" required/>
                        </div>
                        <div class="col-md-12">
                            <img ng-src="{{vm.params.img}}" alt="配图预览" class="img-responsive">
                        </div>
                        <div class="col-md-12">
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                    <th>图片名</th>
                                    <th>文件大小</th>
                                    <th>进度</th>
                                    <th>操作</th>
                                    <th>操作</th>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="item in vm.uploader.queue" class="ng-scope" ng-if="$first">
                                        <td><strong class="ng-binding">{{item.file.name}}</strong></td>
                                        <td ng-show="vm.uploader.isHTML5" nowrap="" class="ng-binding">{{ item.file.size/1024/1024 | number:2 }} MB</td>
                                        <td ng-show="vm.uploader.isHTML5">
                                            <div class="progress" style="margin-bottom: 0;">
                                                <div class="progress-bar" role="progressbar" ng-style="{ 'width': item.progress + '%' }"></div>
                                            </div>
                                        </td>
                                        <td class="text-center">
                                            <span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span>
                                            <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span>
                                            <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span>
                                        </td>
                                        <td nowrap="">
                                            <button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess">
                                                <span class="glyphicon glyphicon-upload"></span> 上传
                                            </button>
                                            <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove(); vm.clearImg()">
                                                <span class="glyphicon glyphicon-trash"></span> 删除
                                            </button>
                                        </td>

                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="col-md-2 control-label ">活动条件</label>
                <div class="col-md-10">
                    <select class="form-control" name="situation" ng-model="vm.params.situation" required>
                        <option value="1" ng-selected="vm.params.situation==1">注册</option>
                        <option value="2" ng-selected="vm.params.situation==2">签到</option>
                        <option value="3" ng-selected="vm.params.situation==3">实名</option>
                        <option value="4" ng-selected="vm.params.situation==4">绑卡</option>
                        <option value="5" ng-selected="vm.params.situation==5">充值</option>
                        <option value="6" ng-selected="vm.params.situation==6">购彩</option>
                    </select>
                </div>

                <div class="col-md-offset-2 col-md-10" ng-if="eventdetail.situation.$invalid && (eventdetail.situation.$touched || vm.error)">
                    <div class="text-danger">请选择活动条件</div>
                </div>
            </div>


            <div class="form-group">

                <label class="col-md-2 control-label">活动时间</label>
                <div class="col-md-10">
                    <input type="text" class="form-control ng-pristine ng-untouched ng-valid renxing"  bs-datepicker
                           data-date-format="yyyy-MM-dd" data-date-type="number" autoclose="true" ng-model="vm.params.startAt" name="startAt" required>
                    <span>至</span>
                    <input type="text" class=" form-control ng-pristine ng-untouched ng-valid renxing" bs-datepicker
                           data-date-format="yyyy-MM-dd" data-date-type="number" autoclose="true" ng-model="vm.params.endAt" name="endAt" data-min-date="{{vm.params.startAt||nowDate-86400000}}" required>
                    <input type="text" value="23:59:59" class="form-control renxing" disabled>
                </div>
                <div class="col-md-offset-2 col-md-10" ng-if="(eventdetail.startAt.$invalid||eventdetail.endAt.$invalid) && vm.error">
                    <div class="text-danger">请完善活动时间</div>
                </div>
            </div>

            <div class="form-group ">
                <label class="col-md-2 control-label">活动奖品</label>
                <label class="col-md-10 control-label star text-left">三种奖品选填，可多选</label>
            </div>


            <div class="form-group">
                <label class="col-md-3 control-label">彩金(元)</label>
                <div class="col-md-9">
                    <input type="text" class=" form-control renxing" size="60"  ng-model="vm.prize[0].content" numberic>
                </div>

            </div>
            <div class="form-group ">
                <label class="col-md-3 control-label">体验金(元)</label>
                <div class="col-md-9">
                    <input type="text" class=" form-control renxing" size="60" ng-model="vm.prize[1].content" numberic>
                </div>
            </div>

            <!--新增出现-->
            <div class="form-group"  ng-repeat="li in vm.prize[2].list track by $index">
                <label class="col-md-3 control-label">红包</label>
                <!--红包类型-->
                <div class="col-md-3 ">
                    <select class="form-control renxing" ng-model="li.id">
                        <option ng-repeat="red in vm.redList" ng-value="red.id" ng-selected="li.id == red.id">{{red.name}}&emsp;&emsp;&emsp;&emsp;</option>
                    </select>
                </div>
                <label class="control-label ">&emsp;&emsp;&emsp;个数</label>
                <input class="form-control renxing" size="15" ng-model="li.counts" numberic>
                <button class=" btn btn-default margin-left-1" ng-click="vm.addlist($index)">{{vm.text($index)}}</button>
            </div>




            <div class="form-group pd-bottom-2">
                <label class="col-md-2 "></label>
                <div class="col-md-10">
                    <div class="col-md-4">
                        <button class="btn btn-default btn-success " ng-click="vm.adviertisementAdd(eventdetail.$invalid)">确定</button>
                        <button class="btn btn-default btn-danger pull-right" ui-sref="field.eventSet">取消</button>
                    </div>
                    <!--<div class="col-md-4">-->
                    <!--<label class="control-label text-red" ng-if="vm.error">请补全信息</label>-->
                    <!--</div>-->

                </div>
            </div>


        </form>
    </div>


</div>