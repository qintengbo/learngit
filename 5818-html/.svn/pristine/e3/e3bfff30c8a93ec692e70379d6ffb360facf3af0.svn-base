



<div class="panel panel-default">
    <div class="panel-body">
        <form class="form-horizontal">
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label class="control-label col-md-4">手机号</label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" ng-model="vm.searchParams.mobile">
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label class="control-label col-md-4">真实姓名</label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" ng-model="vm.searchParams.name">
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label class="control-label col-md-4">审核人</label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" ng-model="vm.searchParams.checkMan">
                        </div>
                    </div>
                </div>

            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label class="control-label col-md-4">开户行</label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" ng-model="vm.searchParams.bank">
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label class="control-label col-md-4">审核状态</label>
                        <div class="col-md-8">
                            <select class="form-control" ng-model="vm.searchParams.checkStatus">
                                <option value="">全部&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;</option>
                                <option value="1">待审核</option>
                                <option value="2">通过</option>
                                <option value="3">未通过</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label class="control-label col-md-4">提现状态</label>
                        <div class="col-md-8">
                            <select class="form-control" ng-model="vm.searchParams.dealStatus">
                                <option value="">全部&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;</option>
                                <option value="4">待处理</option>
                                <option value="5">成功</option>
                                <option value="6">失败</option>
                            </select>
                        </div>
                    </div>
                </div>


            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label class="control-label col-md-4">提现时间</label>
                        <div class="col-md-8">
                            <input class="form-control" size="20" bs-datepicker
                                   data-date-format="yyyy-MM-dd" data-date-type="number" autoclose="true"
                                   data-max-date={{vm.searchParams.cashEnd}} ng-model="vm.searchParams.cashStart">
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label class="control-label col-md-4">至</label>
                        <div class="col-md-8">
                            <input class="form-control" size="20" bs-datepicker
                                   data-date-format="yyyy-MM-dd" data-date-type="number" autoclose="true"
                                   data-min-date={{vm.searchParams.cashStart}} ng-model="vm.searchParams.cashEnd">
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label class="control-label col-md-4">审核时间</label>
                        <div class="col-md-8">
                            <input class="form-control" size="20" bs-datepicker
                                   data-date-format="yyyy-MM-dd" data-date-type="number" autoclose="true"
                                   data-max-date={{vm.searchParams.checkEnd}}
                                   ng-model="vm.searchParams.checkStart">
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="form-group">
                        <label class="control-label col-md-4">至</label>
                        <div class="col-md-8">
                            <input class="form-control" size="20" bs-datepicker
                                   data-date-format="yyyy-MM-dd" data-date-type="number" autoclose="true"
                                   data-min-date={{vm.searchParams.checkStart}} ng-model="vm.searchParams.checkEnd">
                        </div>
                    </div>
                </div>
                <div class="col-md-4 text-right">
                    <button type="button" class="btn btn-danger margin-10" ng-click="vm.cleanSearch()">清空</button>
                    <button type="button" class="btn btn-success" ng-click="vm.cashDetailsGo()">搜索</button>
                </div>
            </div>
        </form>
    </div>
</div>
<div class="panel panel-default">
    <div class="panel-heading">
        <strong>批次号:{{vm.batchNo}}</strong>
        <button type="button" class="btn btn-default btn-xs pull-right" ng-if="vm.isNeedAllDeal" ng-click="vm.cashAudits()">批次通过</button>
    </div>
    <div class="panel-body table-responsive">
        <table style="width:1300px;overflow: scroll" class="table table-striped add-table-border">
            <thead>
            <tr>
                <th><input type="checkbox" ng-if="vm.isNeedAllDeal" ng-model="vm.allBtn" ng-click="vm.all()"> 序号</th>
                <th>提现时间</th>
                <th>手机号</th>
                <th>姓名</th>
                <th>提交时<br>可提余额(元)</th>
                <th>提现金额(元)</th>
                <th>开户行</th>
                <th>提现账户</th>
                <th>审核人</th>
                <th>审核状态</th>
                <th>审核时间</th>
                <th>提现状态</th>
                <th>操作</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="item in vm.list track by $index">
                <td><input ng-if="vm.isNeedAllDeal" type="checkbox" ng-model="item.choice" ng-click="vm.onlyClick()"> {{$index+1}}</td>
                <td>{{item.withdrawalsAt|date:'yyyy-MM-dd HH:mm'}}</td>
                <td>{{item.mobile}}</td>
                <td>{{item.name}}</td>
                <td>{{item.availableBalance}}</td>
                <td>{{item.withdrawals}}</td>
                <td>{{item.bank}}</td>
                <td>{{item.withdrawalAccount}}</td>
                <td>{{item.checkMan}}</td>
                <!--<td ng-if="item.presentState < 2">{{item.presentState|presentAuditState}}</td>-->
                <!--<td ng-if="item.presentState>2">提现成功</td>-->
                <!--<td ng-if="item.presentState === 2">-->
                    <!--<button type="button" class="btn btn-link" ng-click="vm.getAuditReason(item.id)">-->
                        <!--{{item.presentState|presentAuditState}}-->
                    <!--</button>-->
                <!--</td>-->
                <!--审核状态-->

                <td><span ng-if="item.checkStatus!=3">{{item.checkStatus|cashCheckFilter}}</span><span style="color:dodgerblue;cursor: pointer" ng-click="vm.getAuditReason(item.id)" ng-if="item.checkStatus==3">{{item.checkStatus|cashCheckFilter}}</span></td>

                <td>{{item.checkTime|date:'yyyy-MM-dd HH:mm'}}</td>
                <td>{{item.presentState|presentHandleState}}</td>
                <td>
                    <button type="button" class="btn btn-default btn-xs" ng-if="item.checkStatus == 1"
                            ng-click="vm.cashAudit.checkMoneyModal(item.id)">审核
                    </button>
                </td>
            </tr>
            </tbody>
        </table>
        <pagination ng-if="vm.total" total="{{vm.total}}"></pagination>
    </div>
</div>




<!--提现审核-->
<!--提现审核确认钱数的模态框(单个)-->
<script type="text/ng-template" id="checkMoneyModal.html">
    <div class="modal" tabindex="-1">
        <div class="modal-dialog" style="width:1000px">
            <div class="modal-content">
                <div class="modal-header">
                    <a type="button" class="close" style="font-size: 15px;padding-top: 8px" ng-click="$hide()"><span
                            aria-hidden="true">关闭</span></a>
                    <h4 style="font-weight: normal" class="modal-title">操作提示</h4>
                </div>
                <div class="modal-body text-center">
                    <div class="table">
                        <table class="table table-striped add-table-border">
                            <thead>
                            <tr>
                                <th>序号</th>
                                <th>提现时间</th>
                                <th>手机号</th>
                                <th>姓名</th>
                                <th>提交时可提现余额(元)</th>
                                <th>提现金额(元)</th>
                                <th>开户行</th>
                                <th>提现账户</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="li in vm.detailList">
                                <td>{{$index+1}}</td>
                                <td>{{li.withdrawalsAt|date:'yyyy-MM-dd HH:mm'}}</td>
                                <td>{{li.mobile}}</td>
                                <td>{{li.name}}</td>
                                <td>{{li.availableBalance}}</td>
                                <td>{{li.withdrawals}}</td>
                                <td>{{li.bank}}</td>
                                <td>{{li.withdrawalAccount}}</td>

                            </tr>
                            </tbody>
                        </table>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" aria-hidden="true" ng-click="$hide()">取消</button>
                    <button type="button" class="btn btn-default" ng-click="vm.cashAudit.cashAuditReason()">拒绝</button>
                    <button type="button" class="btn btn-primary" ng-click="vm.cashAudit.agree()">通过</button>
                </div>
            </div>
        </div>
    </div>
</script>



<!--提现审核确认钱数的模态框(批次)-->
<script type="text/ng-template" id="checkMoneyListModal.html">
    <div class="modal" tabindex="-1">
        <div class="modal-dialog" style="width:1000px">
            <div class="modal-content">
                <div class="modal-header">
                    <a type="button" class="close" style="font-size: 15px;padding-top: 8px" ng-click="$hide()"><span
                            aria-hidden="true">关闭</span></a>
                    <h4 style="font-weight: normal" class="modal-title">操作提示</h4>
                </div>
                <div class="modal-body text-center">
                    <div class="table">
                        <table class="table table-striped add-table-border">
                            <thead>
                            <tr>
                                <th>序号</th>
                                <th>提现时间</th>
                                <th>手机号</th>
                                <th>姓名</th>
                                <th>提交时可提现余额(元)</th>
                                <th>提现金额(元)</th>
                                <th>开户行</th>
                                <th>提现账户</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="li in vm.detailList">
                                <td>{{$index+1}}</td>
                                <td>{{li.withdrawalsAt|date:'yyyy-MM-dd HH:mm'}}</td>
                                <td>{{li.mobile}}</td>
                                <td>{{li.name}}</td>
                                <td>{{li.availableBalance}}</td>
                                <td>{{li.withdrawals}}</td>
                                <td>{{li.bank}}</td>
                                <td>{{li.withdrawalAccount}}</td>

                            </tr>
                            </tbody>
                        </table>
                    </div>

                </div>

                <h1>{{vm.checkCashAudit}}</h1>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" aria-hidden="true" ng-click="$hide()">取消</button>
                    <!--<button type="button" class="btn btn-default" ng-click="vm.checkCashAudits.fail()">拒绝</button>-->
                    <button type="button" class="btn btn-primary" ng-click="vm.checkCashAudits()">通过</button>
                </div>
            </div>
        </div>
    </div>
</script>



<!--提现审核-->
<script type="text/ng-template" id="cashAudit.html">
    <div class="modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <a type="button" class="close" style="font-size: 15px;padding-top: 8px" ng-click="$hide()"><span
                            aria-hidden="true">关闭</span></a>
                    <h4 style="font-weight: normal" class="modal-title">操作提示</h4>
                </div>
                <div class="modal-body text-center">
                    <p style="font-size: 16px;color: #999">你正在审核该用户的提现申请,审核通过将对用户进行对应打款</p>
                    <p style="font-size: 20px">请选择审核结果</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" ng-click="vm.cashAudit.cashAuditReason()">拒绝</button>
                    <button type="button" class="btn btn-primary" ng-click="vm.cashAudit.agree()">通过</button>
                </div>
            </div>
        </div>
    </div>
</script>






<script type="text/ng-template" id="cashAuditReason.html">
    <div class="modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <a type="button" class="close" style="font-size: 15px;padding-top: 8px" ng-click="$hide()"><span
                            aria-hidden="true">关闭</span></a>
                    <h4 style="font-weight: normal" class="modal-title">操作提示</h4>
                </div>
                <div class="modal-body text-center">
                    <p style="font-size: 16px;color: #999">你正在审核该用户的提现申请,审核拒绝请填写相应理由</p>
                    <textarea class="form-control" rows="3" style="resize:vertical"
                              ng-model="vm.cashAudit.data.reason"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" ng-click="vm.cashAudit.fail()">确定</button>
                </div>
            </div>
        </div>
    </div>
</script>




