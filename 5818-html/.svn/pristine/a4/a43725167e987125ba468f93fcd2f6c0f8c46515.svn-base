angular.module("admin").controller("pushDetailController",["$rootScope","$scope","$state","parameterService","$timeout",function(a,e,r,t,s){var o=this;o.params={},o.params.type=4,""!=o.params.personType&&void 0!=o.params.personType||(o.params.personType=1),r.params.id&&(o.params.id=r.params.id),o.params.id?(t.putArticleDetail(o.params.id).then(function(a){0===a.data.code&&(o.params=a.data.data.article)}),o.addPush=function(e,p){if(p)o.error=!0,s(function(){o.error=!1},3e3);else{if(o.params.pushAt<a.nowDate)return a.alert("定时推送时间不能晚于当前时间!"),!1;o.params.status=e,t.putArticle(o.params.id,o.params).then(function(e){0===e.data.code?a.alert("修改成功",r.go("field.pushSet",{},{reload:!0})):a.alert(e.data.message)})}}):o.addPush=function(e,p){if(p)o.error=!0,s(function(){o.error=!1},3e3);else{if(o.params.pushAt<a.nowDate)return a.alert("定时推送时间不能晚于当前时间!"),!1;o.params.status=e,t.addArticle(o.params).then(function(e){0===e.data.code?a.alert("添加成功",r.go("field.pushSet",{},{reload:!0})):a.alert(e.data.message)})}}}]);