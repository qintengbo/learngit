angular.module("admin").controller("lotterySkillController",["$scope","$state","parameterService","$rootScope",function(a,t,e,r){function o(){s.searchParams.lotteryType=s.lotteryInfo.lotteryType,s.searchParams.type=1,e.getArticleList(s.searchParams).then(function(a){0==a.data.code?(s.total=a.data.data.total,t.params.size=a.data.data.size,s.list=a.data.data.articleList):r.alert(a.data.message)})}var s=this;s.lotteryInfo=JSON.parse(sessionStorage.lotteryInfo),s.searchParams=t.params,void 0===t.params.page&&(t.params.page=1),s.searchParams.startAt=parseInt(s.searchParams.startAt)||void 0,s.searchParams.endAt=parseInt(s.searchParams.endAt)||void 0,o(),a.deleteLottery=function(a){r.confirm("您确定要删除这条记录?",function(){e.deleteArticle(a).then(function(a){0==a.data.code&&r.alert("已成功删除",function(){t.go(t.current,{},{reload:!0})})})})},a.saveDrop=function(){s.ids=[],angular.forEach(s.list,function(a,t){s.ids[t]=a.id}),r.confirm("是否保存此排序?",function(){e.saveDrop(s.ids).then(function(a){0==a.data.code?r.alert("已保存排序",t.go(t.current,s.searchParams,{reload:!0})):r.alert(a.data.message,t.go(t.current,s.searchParams,{reload:!0}))})})}}]);