"use strict";angular.module("admin").factory("commonUtil",["$rootScope","$state",function(e,t){return{pageDefault:{page:1,size:10,next:!0},search:function(e){t.go(t.current,e,{reload:!0})},clean:function(e){return angular.forEach(e,function(t,a){e[a]=""}),console.log(e),e},isAllChoice:function(e){var t=!0;return angular.forEach(e,function(e){e.choice||(t=!1)}),t},allChoice:function(e){return angular.forEach(e,function(t,a){t.choice||(e[a].choice=!0)}),e},cancelAllChoice:function(e){return angular.forEach(e,function(t,a){t.choice&&(e[a].choice=!1)}),e},allList:function(e,t){var a=this.isAllChoice(e);return e=a?this.cancelAllChoice(e):this.allChoice(e)},querySearchParams:function(e){for(var t in e){if(e[t]instanceof Date&&(e[t]=new Date(e[t]).getTime()),t.toLowerCase().indexOf("end")!=-1&&e[t]){var a=String(e[t]),n=a.substring(a.length-1,a.length);"9"!=n&&(e[t]=e[t]+864e5-1)}"page"===t&&(e[t]=1)}return e},process4Page:function(e){return void 0==e&&(e={}),void 0==e.page&&(e.page=t.params.page||this.pageDefault.page),void 0==e.size&&(e.size=t.params.size||this.pageDefault.size),void 0==e.next&&(e.next=t.params.next||this.pageDefault["true"]),{params:e}},processPageResult:function(e){return t.params.next=e.data.data.next,e},setPage:function(e){this.page={current:e.data.data.page,size:e.data.data.size,next:e.data.data.next}},resetPage:function(){this.page={current:1,size:5,next:!0}},page:{current:1,size:5,next:!0},concactArrayParam:function(e,t){var a="?";angular.forEach(t,function(t,n,r){a=a+e+"="+t+"&"});var n=a.substring(0,a.length-1);return n},showErrMsg:function(a){a.data.code==-5020?e.alert(a.data.message,function(){console.log(a.data.code+" get error  message is "+a.data.message),t.go("login",{},{reload:!0})}):e.alert(a.data.message,function(){console.log(a.data.code+" get error  message is "+a.data.message)})},showReturnMsg:function(a,n){switch(a.data.code){case 0:e.alert(a.data.message,function(){console.log(a.data.code+" get error  message is "+a.data.message),void 0==n||t.go(n,{},{reload:!0})});break;case-5020:e.alert(a.data.message,function(){console.log(a.data.code+" get error  message is "+a.data.message),t.go("login",{},{reload:!0})});break;default:e.alert(a.data.message,function(){console.log(a.data.code+" get error  message is "+a.data.message)})}},isUpdate:function(e){return void 0!=e},buildTree:function(e){var t=[];return this.buildTreeNode(0,null,t,e)},buildTreeNode:function(e,t,a,n){var r=this;return angular.forEach(n,function(o,s,i){var u=o;u.parentID==e&&(a=r.buildTreeNode(u.id,u,a,n),0==e?a.push(u):(void 0==t.nodes&&(t.nodes=[]),t.nodes.push(u)))}),a=a.sort(r.treeSort),angular.forEach(a,function(e,t){e.nodes&&(e.nodes=e.nodes.sort(r.treeSort))}),a},treeSort:function(e,t){return e.level<t.level?-1:e.level>t.level?1:0},arrayContains:function(e,t){for(var a=0;a<e.length;a++)if(e[a]===t)return!0;return!1}}}]).factory("datePickerUtils",["$filter",function(e){return{isDate:function(e){return"[object Date]"===Object.prototype.toString.call(e)},buildDates:function(e,t){var a=[],n=new Date(e.getFullYear(),e.getMonth()+1,0,3);for(t=t||{},e=new Date(e);e.getDay()!==t.weekStartsOn;)e.setDate(e.getDate()-1);for(var r=0;r<42&&!(t.noExtraRows&&e.getDay()===t.weekStartsOn&&e>n);r++)a.push(new Date(e)),e.setDate(e.getDate()+1);return a},buildDayNames:function(e){var t=["日","一","二","三","四","五","六"];if(e){t=t.slice(0);for(var a=0;a<e;a++)t.push(t.shift())}return t},monthCourse:function(t,a){var n=[];t=new Date(t),a=new Date(a);for(var r=12*(a.getFullYear()-t.getFullYear())+(a.getMonth()-t.getMonth())+1,o=0;o<r;o++){var s=new Date(t.getFullYear(),t.getMonth()+o,1);n.push(e("date")(s,"yyyy-MM"))}return n},getMonthDate:function(e,t){return new Date(e,t+1,0).getDate()},getDateByTime:function(e,t){var a=new Date(e).getFullYear(),n=new Date(e).getMonth(),r=new Date(e).getDate(),o=new Date(t).getHours(),s=new Date(t).getMinutes();return e&&t?new Date(a,n,r,o,s).getTime():""}}}]);