angular.module("admin").controller("eventSetController",["$scope","parameterService","$state","$rootScope",function(a,t,e,r){function s(){t.getArticleList(n.searchParams).then(function(a){0===a.data.code?(n.list=a.data.data.articleList,n.total=a.data.data.total):2===a.data.code||r.alert(a.data.message)})}var n=this;n.searchParams=e.params,n.searchParams.startAt&&(n.searchParams.startAt=parseInt(e.params.startAt)),n.searchParams.endAt&&(n.searchParams.endAt=parseInt(e.params.endAt)),n.searchParams.type=3,s(),n.deleteEvent=function(a,s){r.operationConfirm("删除后该活动将直接下架并在本地删除?","你确定要执行删除操作吗？",function(){t.deleteArticle(a).then(function(a){0===a.data.code?r.alert("已成功删除",function(){n.list.splice(s,1)}):r.alert(a.data.message,e.go(e.current,n.searchParams,{reload:!0}))})})},a.saveDrop=function(){n.ids=[],angular.forEach(n.list,function(a,t){n.ids[t]=a.id}),r.confirm("是否保存排序?",function(){t.saveDrop(n.ids).then(function(a){0===a.data.code?r.alert("已保存排序",e.go(e.current,n.searchParams,{reload:!0})):r.alert(a.data.message,e.go(e.current,n.searchParams,{reload:!0}))})})}}]);