angular.module("admin").controller("lotterySkillDetailController",["$scope","parameterService","$rootScope","$state","$timeout",function(t,e,a,r,o){var n=this;n.um=UM.getEditor("myEditor"),n.id=r.params.id,n.params={},n.lotteryInfo=JSON.parse(sessionStorage.lotteryInfo),t.back=function(){n.um.destroy()},t.$on("$destroy",function(){t.back()}),n.id&&e.putArticleDetail(n.id).then(function(t){0===t.data.code&&(n.params=t.data.data.article,n.um.setContent(n.params.content))}),t.addArticle=function(){n.params.lotteryType=n.lotteryInfo.lotteryType,e.addArticle(n.params).then(function(e){0==e.data.code?(t.back(),a.alert("新增成功",r.go("field.lotterySkill",{reload:!0}))):a.alert(e.data.message)})},t.putArticle=function(){e.putArticle(n.id,n.params).then(function(e){0==e.data.code?(t.back(),a.alert("编辑成功",r.go("field.lotterySkill",{reload:!0}))):a.alert(e.data.message)})},t.addOrPut=function(e,a){a||!n.um.hasContents()?(n.error=!0,o(function(){n.error=!1},3e3)):(n.params.type=1,n.params.status=e,n.params.content=n.um.getContent(),n.id?t.putArticle():t.addArticle())}}]);