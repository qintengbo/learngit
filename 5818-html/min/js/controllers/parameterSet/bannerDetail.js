angular.module("admin").controller("bannerDetailController",["$scope","$state","parameterService","$rootScope","uploadService","FileUploader","$timeout",function(e,a,t,r,n,p,l){function i(){t.putArticleDetail(o.id).then(function(e){0==e.data.code?o.params=e.data.data.article:r.alert(e.data.message)})}var o=this;o.params={img:[]},o.params.type=2,o.id=a.params.id,o.selectType=[{name:"彩种",jumpType:3},{name:"活动",jumpType:4},{name:"H5页面",jumpType:2},{name:"无跳转",jumpType:1}],o.activityType=[{name:"注册",type:1},{name:"签到",type:2},{name:"实名",type:3},{name:"绑卡",type:4},{name:"充值",type:5},{name:"购彩",type:6},{name:"摇奖",type:7}],t.getlotteryTypeList().then(function(e){0==e.data.code?o.lotteryList=e.data.data.list:r.alert(e.data.message)}),p.FileSelect.prototype.isEmptyAfterSelection=function(){return!0},o.uploader=n.uploadFile(p),o.uploader.onSuccessItem=function(e,a,t,r){200==t&&o.params.img.push({url:a.data.url})},o.id&&i(),e.newBanner=function(e){o.params.status=e,t.addArticle(o.params).then(function(e){0==e.data.code?r.alert("新增成功",a.go("field.bannerSet",{reload:!0})):r.alert(e.data.message)})},e.putBanner=function(e){return o.params.status=e,null!=o.params.url&&void 0!=o.params.url||1==o.params.jumpType?void t.putArticle(o.id,o.params).then(function(e){0==e.data.code?r.alert("编辑成功",a.go("field.bannerSet",{reload:!0})):r.alert(e.data.message)}):(r.alert("请完善类型信息"),!1)},e.newOrPut=function(a,t){return o.params.url&&null!=o.params.url&&void 0!=o.params.url||1==o.params.jumpType?t?(o.error=!0,l(function(){o.error=!1},3e3),!1):void(o.id?e.putBanner(a):e.newBanner(a)):(r.alert("请完善类型信息"),!1)}}]);