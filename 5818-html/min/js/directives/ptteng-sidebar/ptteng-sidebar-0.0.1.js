"use strict";angular.module("admin").directive("sidebar",function(){return{templateUrl:"js/directives/ptteng-sidebar/ptteng-sidebar-0.0.1.html",restrict:"E",replace:!0,scope:{},controller:["$scope","$rootScope","$state","$location","roleService","managerService","moduleService","recordCookies","commonUtil",function(e,i,t,s,o,r,a,d,n){var l=r.getSelfDetail();return void 0==l?(t.go("login"),!1):(i.uid=l.role.id,o.getRole(l.role.id).then(function(t){if(0==t.data.code){var s=Object.keys(t.data.data.role.permissionsSet);localStorage.permissionsSet=JSON.stringify(t.data.data.role.permissionsSet),i.permissionsSet=JSON.parse(localStorage.permissionsSet),""==sessionStorage.mineSide||void 0==sessionStorage.mineSide?a.batchGetModule(s).then(function(i){0==i.data.code&&(e.sideList=n.buildTree(i.data.data.moduleList))}):e.sideList=JSON.parse(sessionStorage.mineSide)}}),void(e.sideClick=function(i){var t="";angular.forEach(e.sideList,function(s,o){angular.forEach(s.nodes,function(r){i==r.id?(e.collapseVar=o,r.selected=!0,s.se=!0,t=s.id):t!=s.id?(r.selected=!1,s.se=!1):i!=r.id&&t==s.id&&(r.selected=!1)})}),console.log(e.sideList),sessionStorage.mineSide=JSON.stringify(e.sideList)}))}]}});