web.directive("simpleUpload",["simpleUploadService",function(e){return{restrict:"AE",scope:{ngModel:"=",multi:"@"},require:"ngModel",template:'<div class="uploader-box" ng-click="triggerSelect()"><img ng-if="img" ng-src="{{img}}" /><span ng-if="uploadStatus">上传中...</span><p ng-if="!img">点击上传图片</p></div><input class="hidden" type="file" id="fileInput" onchange="angular.element(this).scope().uploadFile(this.files);">',link:function(i,t,l,n){i.img=i.ngModel,i.uploadStatus=!1,i.triggerSelect=function(){t.children("input[type=file]").trigger("click")};var a=l.type||0;i.uploadFile=function(t){var l=new FormData;l.append("file",t[0]),i.uploadStatus=!0,e.uploadFile(a,l).then(function(e){i.img=e.data.url,i.uploadStatus=!1,n.$setViewValue(i.img)})}},controller:function(e,i,t){}}}]);